{% load i18n %}
{% get_language_info for LANGUAGE_CODE as lang %}
{% get_language_info_list for LANGUAGES as langs %}

{% url 'profile:login' as login_url %}
{% trans 'Log In' as login_text %}

<nav class="top-bar" data-topbar role="navigation" data-options="is_hover: false">
    <ul class="title-area">
        <li class="name">
            <h1><a href="{% url 'home' %}">LevelUp</a></h1>
        </li>
        <li class="toggle-topbar menu-icon"><a href="#"><span>{% trans "Menu" %}</span></a></li>
    </ul>
    <section class="top-bar-section">
        <!-- Right Nav Section -->
        <ul class="right">
            {% if user.is_authenticated %}
                <li class="has-dropdown">
                    <a href="#"><i class="fa fa-id-card"></i> {{ user.username }}</a>
                    <ul class="dropdown">
                        <li><a href="{% url 'profile:user-profile' %}">{% trans "My Profile" %}</a></li>
                        <li><a href="{% url 'logout' %}?next={{request.path}}">{% trans "Log Out" %}</a></li>
                    </ul>
                </li>
            {% elif request.path != login_url %}
                <li><a href="{% url 'login' %}?next={{request.path}}"><i class="fa fa-sign-in"></i> {% trans "Log In" %}</a></li>
            {% endif %}
            {% if langs|length > 1 %}
            <li class="has-dropdown">
                <a href="#"><i class="fa fa-globe"></i> {{ lang.name_translated }}</a>
                <ul class="dropdown">
                    <form action="{% url 'set_language' %}" method="post">
                        <input name="next" value="{{ request.path }}" type="hidden"/>
                        {% csrf_token %}
                        {% for l in langs %}
                            {% if l.code != lang.code %}
                            <li><button class="link-button" type="submit" name="language" value="{{ l.code }}">{{ l.name_local }}</button></li>
                            {% endif %}
                        {% endfor %}
                    </form>
                </ul>
            </li>
            {% endif %}
        </ul>
        <!-- Left Nav Section -->
        <ul class="left">
            <li><a href="{% url 'home' %}"><i class="fa fa-home"></i> {% trans "Home" %}</a></li>
            {% if user.is_authenticated %}
                <li><a href="{% url 'game:my-games' %}"><i class="fa fa-gamepad"></i> {% trans "My Games" %}</a></li>
            {% endif %}
            <li><a href="{% url 'game:store' %}"><i class="fa fa-shopping-basket"></i> {% trans "Store" %}</a></li>
        </ul>
  </section>
</nav>