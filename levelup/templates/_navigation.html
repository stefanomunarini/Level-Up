{% load i18n %}
{% get_language_info for LANGUAGE_CODE as lang %}
{% get_language_info_list for LANGUAGES as langs %}

{% url 'profile:login' as login_url %}

<nav class="top-bar" data-topbar role="navigation" data-options="is_hover: false">
    <ul class="title-area">
        <li class="name">
            <h1><a href="{% url 'home' %}">LevelUp</a></h1>
        </li>
        <li class="toggle-topbar menu-icon"><a href="#"><span>{% trans "Menu" %}</span></a></li>
    </ul>
    <section class="top-bar-section">
        <!-- Right Nav Section -->
        <ul class="right">
            {% if user.is_authenticated %}
                <li class="has-dropdown">
                    <a href="#"><i class="fa fa-id-card"></i> {{ user.username }}</a>
                    <ul class="dropdown">
                        <li><a href="{% url 'profile:user-profile' %}"><i class="fa fa-user-circle-o"></i> {% trans "My Profile" %}</a></li>
                        <li><a href="{% url 'logout' %}"><i class="fa fa-sign-out"></i> {% trans "Log Out" %}</a></li>
                    </ul>
                </li>
            {% elif request.path != login_url %}
                {% url 'login' as href %}
                <li{% if href == request.path %} class="active"{% endif %}><a href="{% url 'login' %}?next={{request.path}}"><i class="fa fa-sign-in"></i> {% trans "Log In" %}</a></li>
                {% url 'profile:signup' as href %}
                <li{% if href == request.path %} class="active"{% endif %}><a href="{{ href }}"><i class="fa fa-user-plus"></i> {% trans "Sign Up" %}</a></li>
            {% endif %}
            {% if langs|length > 1 %}
            <li class="has-dropdown">
                <a href="#"><i class="fa fa-globe"></i> {{ lang.name_translated }}</a>
                <ul class="dropdown">
                    <form action="{% url 'set_language' %}" method="post">
                        <input name="next" value="{{ request.path }}" type="hidden"/>
                        {% csrf_token %}
                        {% for l in langs %}
                            {% if l.code != lang.code %}
                            <li><button class="link-button" type="submit" name="language" value="{{ l.code }}">{{ l.name_local }}</button></li>
                            {% endif %}
                        {% endfor %}
                    </form>
                </ul>
            </li>
            {% endif %}
        </ul>
        <!-- Left Nav Section -->
        <ul class="left">
            {% for link in main_menu.left %}{% if not link.hide %}
                {% url link.view as href %}
                <li class="{% if href == request.path %}active{% endif %}">
                    <a href="{{ href }}" >{% if link.icon %}<i class="fa fa-{{ link.icon }}"></i> {% endif %}{{ link.label }}</a>
                </li>
            {% endif %}{% endfor %}
        </ul>
  </section>
</nav>